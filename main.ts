namespace SpriteKind {
    export const left = SpriteKind.create()
    export const right = SpriteKind.create()
    export const text = SpriteKind.create()
    export const collision1 = SpriteKind.create()
    export const collision2 = SpriteKind.create()
}

sprites.onOverlap(SpriteKind.collision1, SpriteKind.Projectile, function on_on_overlap(sprite: Sprite, otherSprite: Sprite) {
    
    score += 1
    sprites.destroy(ball2)
    do_something()
    if (score >= 10) {
        game.setGameOverMessage(true, "Left Side Wins!")
        game.over(true)
    }
    
})
function draw_text2(x: number, y: number, text2: string): Sprite {
    
    texty2 = sprites.create(image.create(30, 10), SpriteKind.text)
    texty2.setPosition(x, y)
    texty2.image.print(text2, 0, 0, 5)
    return texty2
}

function draw_text(x2: number, y2: number, text3: string): Sprite {
    
    texty = sprites.create(image.create(30, 10), SpriteKind.text)
    texty.setPosition(x2, y2)
    texty.image.print(text3, 0, 0, 5)
    return texty
}

sprites.onOverlap(SpriteKind.collision2, SpriteKind.Projectile, function on_on_overlap3(sprite3: Sprite, otherSprite3: Sprite) {
    
    score2 += 1
    sprites.destroy(ball2)
    do_something()
    if (score2 >= 10) {
        game.setGameOverMessage(true, "Right Side Wins!")
        game.over(true)
    }
    
})
sprites.onOverlap(SpriteKind.left, SpriteKind.Projectile, function on_on_overlap2(paddle: Sprite, ball: Sprite) {
    let offset = ball.y - paddle.y
    let normalized = offset / (paddle.height / 2)
    let new_vy = normalized * 100
    let new_vx = Math.abs(ball.vx)
    ball.setVelocity(new_vx, new_vy)
})
sprites.onOverlap(SpriteKind.right, SpriteKind.Projectile, function on_on_overlap4(paddle: Sprite, ball: Sprite) {
    let offset = ball.y - paddle.y
    let normalized = offset / (paddle.height / 2)
    let new_vy = normalized * 100
    let new_vx = -Math.abs(ball.vx)
    ball.setVelocity(new_vx, new_vy)
})
function do_something() {
    
    ball2 = sprites.create(img`
            11111111111111111111
            11111111111111111111
            11111111111111111111
            11111111111111111111
            11111111111111111111
            11111111111111111111
            11111111111111111111
            11111111111111111111
            11111111111111111111
            11111111111111111111
            11111111111111111111
            11111111111111111111
            11111111111111111111
            11111111111111111111
            11111111111111111111
            11111111111111111111
            11111111111111111111
            11111111111111111111
            `, SpriteKind.Projectile)
    ball2.setScale(0.3, ScaleAnchor.Middle)
    ball2.setVelocity(100, 0)
}

let ball2 : Sprite = null
let score2 = 0
let texty : Sprite = null
let ball : Sprite = null
let texty2 : Sprite = null
let score = 0
do_something()
let plate_left = sprites.create(img`
    . . 8 8 8 . .
    . . 8 8 8 . .
    . . 8 8 8 . .
    . . 8 8 8 . .
    . . 8 8 8 . .
    . . 8 8 8 . .
    . . 8 8 8 . .
    . . 8 8 8 . .
    . . 8 8 8 . .
    . . 8 8 8 . .
    . . 8 8 8 . .
    . . 8 8 8 . .
    . . 8 8 8 . .
    . . 8 8 8 . .
    . . 8 8 8 . .
    . . 8 8 8 . .
    . . 8 8 8 . .
    . . 8 8 8 . .
    . . 8 8 8 . .
    . . 8 8 8 . .
    . . 8 8 8 . .
    . . 8 8 8 . .
    . . 8 8 8 . .
    . . 8 8 8 . .
    . . 8 8 8 . .
`, SpriteKind.left)
let plate_right = sprites.create(img`
    . . 8 8 8 . .
    . . 8 8 8 . .
    . . 8 8 8 . .
    . . 8 8 8 . .
    . . 8 8 8 . .
    . . 8 8 8 . .
    . . 8 8 8 . .
    . . 8 8 8 . .
    . . 8 8 8 . .
    . . 8 8 8 . .
    . . 8 8 8 . .
    . . 8 8 8 . .
    . . 8 8 8 . .
    . . 8 8 8 . .
    . . 8 8 8 . .
    . . 8 8 8 . .
    . . 8 8 8 . .
    . . 8 8 8 . .
    . . 8 8 8 . .
    . . 8 8 8 . .
    . . 8 8 8 . .
    . . 8 8 8 . .
    . . 8 8 8 . .
    . . 8 8 8 . .
    . . 8 8 8 . .
`, SpriteKind.right)
let collision_barr = sprites.create(img`
        ....1111111.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1111111.....
        `, SpriteKind.collision1)
collision_barr.setPosition(163, 70)
let collision_barr2 = sprites.create(img`
        ....1111111.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1fffff1.....
        ....1111111.....
        `, SpriteKind.collision2)
collision_barr2.setPosition(-2, 70)
collision_barr.setPosition(163, 70)
plate_left.setPosition(10, 60)
plate_right.setPosition(150, 60)
plate_left.setStayInScreen(true)
plate_right.setStayInScreen(true)
controller.moveSprite(plate_right, 0, 195)
let score_label = draw_text(20, 10, "Left ")
let score_amount = draw_text(20, 10, "" + ("" + score))
let score_label2 = draw_text(125, 10, "Right: ")
let score_amount2 = draw_text(163, 10, "" + ("" + score))
game.onUpdate(function on_on_update() {
    if (controller.B.isPressed()) {
        plate_left.y -= 4.1
    } else if (controller.A.isPressed()) {
        plate_left.y += 4.1
    }
    
})
game.onUpdate(function on_on_update2() {
    
    sprites.destroy(score_amount)
    score_amount = draw_text(50, 10, "" + ("" + score))
})
game.onUpdate(function on_on_update3() {
    
    sprites.destroy(score_amount2)
    score_amount2 = draw_text(160, 10, "" + ("" + score2))
})
